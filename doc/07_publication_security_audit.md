# Проверка безопасности перед публикацией

Дата: 2026-02-26

## Что проверено
- `git ls-files` (что реально трекается git).
- Поиск сигнатур секретов в репозитории (`rg`).
- Проверка `.gitignore`.
- Проверка папки `key/`.

## Найдено и исправлено
1. В `test.ipynb` был hardcoded OpenAI key (`sk-...`) в нескольких ячейках.
- Статус: исправлено (заменено на безопасный placeholder).

2. В `config/constants.py` был hardcoded proxy URL с логином/паролем.
- Статус: исправлено.
- Теперь proxy берется из `PROXY_URL` (`env`), при отсутствии прокси используется пустой словарь.

## Текущее состояние трекинга секретов
- Файл сервисного ключа `key/google_key_*.json` физически есть в проекте, но **не трекается git** (защищен `.gitignore`).
- `.env` не трекается git.
- Добавлен security-baseline:
  - `.pre-commit-config.yaml`
  - `.secrets.baseline` (генерируется `detect-secrets`, текущий baseline без находок по tracked-коду)
  - pre-commit hook установлен локально.

## Остаточные риски
1. `test.ipynb` остается tracked-файлом, поэтому туда легко снова случайно записать секреты.
2. `.idea/*` сейчас tracked; это не секреты, но нежелательный шум для публикации.

## Рекомендации перед публичным релизом
1. Подключить pre-commit scan секретов (`gitleaks` или `detect-secrets`).
2. Добавить `env`-шаблон (`.env.example`) без реальных значений.
3. По возможности вынести эксперименты из tracked notebooks или убрать их из репозитория.
4. Проверить историю git на старые утечки (если ключи уже были закоммичены ранее, их нужно ротировать независимо от текущего состояния файлов).
