# Context Registry

Purpose: track freshness and trust of planning sources before execution tasking.

## Trust Scale
- `high`: verified against runnable flow/code recently, safe for execution tasking.
- `medium`: partially verified, safe for planning with explicit assumptions.
- `low`: unverified/conflicting; execution blocked until verification task is done.

## Active Registry
| source | last_verified_at | verified_by | evidence | trust_level | notes |
|---|---|---|---|---|---|
| `agile/sprint_current.md` | 2026-02-27 | TeamLead | verified and normalized board to operational format with WIP=1 and explicit Stage 9 counters; active task switched to DTM-82 | high | current sprint control plane in repo |
| `agile/context_registry.md` | 2026-02-27 | TeamLead | trust entries refreshed after doc-structure refactor and active reference checks across README/agile/doc files | high | compact active registry; historical evidence moved to archive |
| `doc/03_reconstruction_backlog.md` | 2026-02-27 | TeamLead | rewritten to concise stage status and active queue format; historical verbose snapshot moved to `doc/archive/03_reconstruction_backlog_2026-02-27.pre_readability.md` | high | now suitable as fast planning source |
| `doc/00_documentation_map.md` | 2026-02-27 | TeamLead | updated with explicit folder semantics (`doc/ops`, `doc/governance`, `doc/stages`, `doc/archive`) and read order | high | primary onboarding path for docs readability |
| `doc/ops/stage9_main_autodeploy_setup.md` | 2026-02-27 | TeamLead | aligned with latest cloud/deploy commits and Stage 9 delivery objective | high | primary Stage 9 setup reference |
| `doc/ops/stage9_deployment_smoke_checklist.md` + live endpoint smoke | 2026-02-27 | TeamLead | validated endpoint responses on current deployed version: `--healthcheck => !HEALTHY!`, `--mode timer --dry-run --mock-external => !GOOD!`; checklist grounded on runnable evidence | high | operational smoke baseline is now explicit and reproducible |
| `.github/workflows/deploy_yc_function_main.yml` contract gate | 2026-02-27 | TeamLead | workflow now executes `read_model_contract_compat_smoke` and `schema_snapshot_smoke` before deploy; local evidence confirms both checks pass | high | deploy now has pre-release consumer contract regression barrier |
| Stage 10 kickoff sources (`doc/03_reconstruction_backlog.md`, `agile/sprint_current.md`, `doc/stages/21...`, `doc/stages/22...`) | 2026-02-27 | TeamLead | Stage 9 completion evidence reconciled with current sprint board and Jira lifecycle (`DTM-76..DTM-87` done) before initializing Stage 10 baseline queue | high | safe to start Stage 10 execution slices without context drift |
| Deploy evidence normalization source (`agent/deploy_run_evidence_report.py` + smoke) | 2026-02-27 | TeamLead | script uses GitHub Actions REST endpoints (`workflow runs` + `run jobs`) and emits stable JSON report; smoke confirms artifact shape and minimum sections | high | deploy evidence can be tracked outside chat/UI screenshots |
| Stage 10 cloud shadow-run runtime contour (`PROTOTYPE_*_S3_KEY`) | 2026-02-27 | TeamLead | uploaded prototype artifacts to Object Storage and reran `agent/stage8_shadow_run_evidence.py --require-cloud-keys`; run passed with evidence artifact `artifacts/shadow_run_stage8/20260227T215711Z_stage8_shadow_run/shadow_run_evidence.json` | high | blocker resolved, cloud required-mode gate is operational |
| Stage 11 retrospective kickoff sources (`doc/stages/23...`, `doc/stages/24...`, `agile/retro.md`) | 2026-02-27 | TeamLead | Stage 10 closeout evidence reconciled with sprint/backlog; Stage 11 reframed to detailed retrospective with explicit slices and corrective-backlog outcome | high | safe to execute deep retrospective without scope ambiguity |
| Stage 11 analytical sources (`doc/stages/25...`, `doc/stages/26...`) | 2026-02-27 | TeamLead | timeline and root-cause clusters documented from completed stage artifacts and Jira lifecycle history | high | prepared input for cost quantification and corrective backlog slicing |
| Stage 11 completion package (`doc/stages/27...` to `doc/stages/30...`) | 2026-02-27 | TeamLead | cost estimate, corrective backlog, review package, and closeout/handoff published with Jira lifecycle closure (`DTM-96..DTM-99`) | high | Stage 11 retrospective is complete and Stage 12 can start from approved corrective priorities |
| Stage 12 pivot sources (owner directive + `doc/stages/31...` + `doc/governance/stage12_code_quality_standard.md`) | 2026-02-27 | TeamLead | owner explicitly redirected Stage 12 from feature/corrective implementation to full code quality sweep; execution plan and quality standard published | high | scope is clear: no feature work, only code quality and readability hardening |
| Stage 12 inventory sources (`agent/build_stage12_audit_matrix.py` + `doc/governance/stage12_module_audit_matrix.md` + `git log`) | 2026-02-27 | TeamLead | generated repo-wide module/class/method matrix (`53` modules, `398` items) and validated recent drift via `git log -n 5`; script hardened for BOM/syntax guard | high | safe baseline for per-module cleanup slices without blind spots |
| Stage 12 core cleanup sources (`core/bootstrap.py`, `core/planner.py`, `core/use_cases.py`, `core/contracts.py`) | 2026-02-27 | TeamLead | first cleanup patch applied (typing/docstrings/readability); `python -m compileall core` passed; timer dry-run failed on external spreadsheet lookup mismatch, not code import/syntax | medium | execution can continue with mock/sanity checks while external sheet contour is stabilized |
| Stage 12 deep replan sources (`doc/governance/stage12_module_audit_matrix.md` + Jira queue `DTM-103..DTM-155` + `doc/stages/32_stage12_deep_module_queue.md`) | 2026-02-28 | TeamLead | owner requested deeper per-module execution; created one Jira task per module (`53` tasks), generated task files and queue artifact, set `DTM-103` (`core.reminder`) as single active task | high | stage now runs in strict deep mode with transparent queue and WIP=1 |
| Stage 12 `core.reminder` deep cleanup (`DTM-103`) | 2026-02-28 | TeamLead | applied type/readability hardening in `core/reminder.py`; checks passed: `python -m compileall core`, `agent/reminder_fallback_smoke.py`, `agent/reminder_idempotency_smoke.py`, `agent/reminder_retry_backoff_smoke.py`; task moved to `Готово` | high | next active module: `DTM-104` (`core.manager`) |
| Stage 12 `core.manager` deep cleanup (`DTM-104`) | 2026-02-28 | TeamLead | applied broad typing/readability hardening in `core/manager.py`; checks passed: `python -m compileall core`, `agent/render_adapter_smoke.py`; task moved to `Готово` | high | next active module: `DTM-105` (`core.repository`) |
| Stage 12 `core.repository` deep cleanup (`DTM-105`) | 2026-02-28 | TeamLead | applied typing/readability hardening in `core/repository.py`; checks passed: `python -m compileall core`, `agent/read_model_builder_smoke.py`; task moved to `Готово` | high | next active module: `DTM-106` (`agent.render_adapter_smoke`) |
| Stage 12 `agent.render_adapter_smoke` deep cleanup (`DTM-106`) | 2026-02-28 | TeamLead | applied typing/readability hardening in `agent/render_adapter_smoke.py`; check passed: `agent/render_adapter_smoke.py`; task moved to `Готово` | high | next active module: `DTM-107` (`utils.func`) |
| Stage 12 `utils.func` deep cleanup (`DTM-107`) | 2026-02-28 | TeamLead | full file refactor with unified typing/style/readability and explicit numpy dependency; checks passed: `python -m compileall core utils`, `agent/render_adapter_smoke.py`, `agent/reminder_retry_backoff_smoke.py`; task moved to `Готово` | high | next active module: `DTM-108` (`agent.reminder_retry_backoff_smoke`) |
| Stage 12 `agent.reminder_retry_backoff_smoke` deep cleanup (`DTM-108`) | 2026-02-28 | TeamLead | refactored module into typed reusable harness with deduplicated setup; checks passed: `python -m compileall agent`, `agent/reminder_retry_backoff_smoke.py`; task moved to `Готово` | high | next active module: `DTM-109` (`utils.service`) |
| Stage 12 `utils.service` deep cleanup (`DTM-109`) | 2026-02-28 | TeamLead | applied typing/readability hardening in `utils/service.py` for service API and write-path methods; checks passed: `python -m compileall utils`, `agent/read_model_builder_smoke.py`, `agent/render_adapter_smoke.py`; task moved to `Готово` | high | next active module: `DTM-110` (`core.people`) |
| Stage 12 `core.people` deep cleanup (`DTM-110`) | 2026-02-28 | TeamLead | refactored `core/people.py` with typed entities and manager lifecycle methods; checks passed: `python -m compileall core`, `agent/reminder_idempotency_smoke.py`; task moved to `Готово` | high | next active module: `DTM-111` (`core.adapters`) |
| Stage 12 `core.adapters` deep cleanup (`DTM-111`) | 2026-02-28 | TeamLead | added protocol docstrings and typing cleanup in `core/adapters.py`; checks passed: `python -m compileall core`, `agent/render_adapter_smoke.py`; task moved to `Готово` | high | next active module: `DTM-112` (`agent.reminder_delivery_counters_smoke`) |
| Stage 12 `agent.reminder_delivery_counters_smoke` deep cleanup (`DTM-112`) | 2026-02-28 | TeamLead | applied typing/readability hardening in smoke fixtures; checks passed: `python -m compileall agent`, `agent/reminder_delivery_counters_smoke.py`; task moved to `Готово` | high | next active module: `DTM-113` (`agent.reminder_idempotency_smoke`) |
| Stage 12 `agent.reminder_idempotency_smoke` deep cleanup (`DTM-113`) | 2026-02-28 | TeamLead | applied typed/readable smoke harness and fixture contracts; checks passed: `python -m compileall agent`, `agent/reminder_idempotency_smoke.py`; task moved to `Готово` | high | next active module: `DTM-114` (`core.contracts`) |
| Stage 12 `core.contracts` deep cleanup (`DTM-114`) | 2026-02-28 | TeamLead | refactored contracts module to unified typed style and deduplicated required-column helper; checks passed: `python -m compileall core`, `agent/read_model_builder_smoke.py`; task moved to `Готово` | high | next active module: `DTM-115` (`agent.reminder_alert_evaluator`) |
| Stage 12 `agent.reminder_alert_evaluator` deep cleanup (`DTM-115`) | 2026-02-28 | TeamLead | normalized summary value extraction via `_summary_value` helper and kept evaluator behavior stable; checks passed: `python -m compileall agent`, `agent/reminder_alert_evaluator_smoke.py`; task moved to `Готово` | high | next active module: `DTM-116` (`core.planner`) |
| Stage 12 `core.planner` deep cleanup (`DTM-116`) | 2026-02-28 | TeamLead | added safe `_counter_value` helper, simplified reminder summary extraction, and improved facade docstrings; checks passed: `python -m compileall core`, `python -m compileall agent`, `agent/reminder_alert_evaluator_smoke.py`; task moved to `Готово` | high | next active module: `DTM-117` (`agent.reminder_parallel_enhancer_smoke`) |
| Stage 12 `agent.reminder_parallel_enhancer_smoke` deep cleanup (`DTM-117`) | 2026-02-28 | TeamLead | replaced encoding-sensitive literals with stable constants, added typing/docstrings, and clarified test stubs; checks passed: `python -m compileall agent`, `agent/reminder_parallel_enhancer_smoke.py`; task moved to `Готово` | high | next active module: `DTM-118` (`core.sheet_renderer`) |
| Stage 12 `core.sheet_renderer` deep cleanup (`DTM-118`) | 2026-02-28 | TeamLead | introduced explicit sheet-service protocol typing, normalized payload type hints, and clarified adapter methods with concise docstrings; checks passed: `python -m compileall core`, `agent/render_adapter_smoke.py`; task moved to `Готово` | high | next active module: `DTM-119` (`agent.notify_owner`) |
| Stage 12 `agent.notify_owner` deep cleanup (`DTM-119`) | 2026-02-28 | TeamLead | restored readable RU-validation logic and messages, normalized regex constants, and preserved payload guard behavior; checks passed: `python -m compileall agent`, `agent/notify_owner_payload_smoke.py`; task moved to `Готово` | high | next active module: `DTM-120` (`agent.reminder_fallback_smoke`) |
| Stage 12 `agent.reminder_fallback_smoke` deep cleanup (`DTM-120`) | 2026-02-28 | TeamLead | normalized fixture typing/docstrings and replaced encoding-sensitive literals with stable constants; checks passed: `python -m compileall agent`, `agent/reminder_fallback_smoke.py`; task moved to `Готово` | high | next active module: `DTM-121` (`core.errors`) |
| Stage 12 `core.errors` deep cleanup (`DTM-121`) | 2026-02-28 | TeamLead | added module-level and dataclass-level docstrings for explicit error-contract intent; check passed: `python -m compileall core`; task moved to `Готово` | high | next active module: `DTM-122` (`agent.build_stage12_audit_matrix`) |
| Stage 12 `agent.build_stage12_audit_matrix` deep cleanup (`DTM-122`) | 2026-02-28 | TeamLead | improved script readability with skip constants, frozen dataclass, and explicit render helper; checks passed: `python -m compileall agent`, `agent/build_stage12_audit_matrix.py` (`53` modules, `411` items) | high | next active module: `DTM-123` (`agent.capture_baseline`) |
| Stage 12 `agent.capture_baseline` deep cleanup (`DTM-123`) | 2026-02-28 | TeamLead | cleaned duplicate imports, restored readable RU notify-context text, improved helper typing/docstrings while preserving artifact capture behavior; checks passed: `python -m compileall agent`, `agent/capture_baseline.py --help` | high | next active module: `DTM-124` (`agent.deploy_run_evidence_report`) |
| Stage 12 `agent.deploy_run_evidence_report` deep cleanup (`DTM-124`) | 2026-02-28 | TeamLead | added explicit typing/docstrings, default workflow constant, and helper cleanup without behavior change; checks passed: `python -m compileall agent`, `agent/deploy_run_evidence_report_smoke.py` | high | next active module: `DTM-125` (`agent.stage8_shadow_run_evidence`) |
| Stage 12 `agent.stage8_shadow_run_evidence` deep cleanup (`DTM-125`) | 2026-02-28 | TeamLead | improved script typing/docstrings, default python resolver helper, and subprocess decoding resilience for command wrappers; checks passed: `python -m compileall agent`, `agent/stage8_shadow_run_evidence.py --help` | high | next active module: `DTM-126` (`agent.sync_lockbox_from_env`) |
| Stage 12 `agent.sync_lockbox_from_env` deep cleanup (`DTM-126`) | 2026-02-28 | TeamLead | added safer env parsing/printing (BOM-safe keys, safe console output), typing/docstrings, and robust subprocess decoding; checks passed: `python -m compileall agent`, `agent/sync_lockbox_from_env.py --dry-run` | high | next active module: `DTM-127` (`web_prototype.loader`) |
| Stage 12 `web_prototype.loader` deep cleanup (`DTM-127`) | 2026-02-28 | TeamLead | added explicit docstrings for payload/load/validation helpers to improve readability with no logic changes; checks passed: `python -m compileall web_prototype`, `agent/prototype_loader_smoke.py` | high | next active module: `DTM-128` (`agent.prepare_web_prototype_payload`) |
| Stage 12 `agent.prepare_web_prototype_payload` deep cleanup (`DTM-128`) | 2026-02-28 | TeamLead | extracted environment-key helpers/constants and added concise docstrings for source-mode resolution path; checks passed: `python -m compileall agent`, `agent/prepare_web_prototype_payload_smoke.py` | high | next active module: `DTM-129` (`core.read_model`) |
| Stage 12 `core.read_model` deep cleanup (`DTM-129`) | 2026-02-28 | TeamLead | introduced explicit required top-level fields constant and concise contract helper docstrings without behavior changes; checks passed: `python -m compileall core`, `agent/read_model_builder_smoke.py`, `agent/read_model_contract_compat_smoke.py` | high | next active module: `DTM-130` (`utils.storage`) |
| Stage 12 `utils.storage` deep cleanup (`DTM-130`) | 2026-02-28 | TeamLead | added explicit typing, env helper normalization, and safer optional S3 client params while preserving storage behavior; checks passed: `python -m compileall utils`, `agent/prototype_loader_smoke.py` | high | next active module: `DTM-131` (`agent.build_fixture_bundle`) |
| Stage 12 `agent.build_fixture_bundle` deep cleanup (`DTM-131`) | 2026-02-28 | TeamLead | added concise helper docstrings and extracted JSON-loading helper for readability while preserving bundle semantics; checks passed: `python -m compileall agent`, `agent/fixture_bundle_smoke.py` | high | next active module: `DTM-132` (`agent.notify_owner_payload_smoke`) |
| Stage 12 `agent.notify_owner_payload_smoke` deep cleanup (`DTM-132`) | 2026-02-28 | TeamLead | replaced mojibake with valid RU samples, added dataclass args fixture and concise smoke docstrings; checks passed: `python -m compileall agent`, `agent/notify_owner_payload_smoke.py` | high | next active module: `DTM-133` (`core.fixture_bundle`) |
| Stage 12 `core.fixture_bundle` deep cleanup (`DTM-133`) | 2026-02-28 | TeamLead | extracted timestamp/list/dict helpers and simplified repeated guard logic for readability without contract change; checks passed: `python -m compileall core`, `agent/fixture_bundle_smoke.py` | high | next active module: `DTM-134` (`core.schema_snapshot`) |
| Stage 12 `core.schema_snapshot` deep cleanup (`DTM-134`) | 2026-02-28 | TeamLead | added UTC helper and concise schema/type helper docstrings without output contract changes; checks passed: `python -m compileall core`, `agent/schema_snapshot_smoke.py` | high | next active module: `DTM-135` (`agent.invoke_function_smoke`) |
| `core/reminder.py` + `utils/service.py` + `index.py` serverless runtime path | 2026-02-27 | TeamLead | reproduced cloud `InvalidToken` import crash and follow-up runtime crash for HTTP invoke payload; fixed eager notifier side effects + added HTTP body parsing in handler; deploy run `22501249449` and endpoint healthcheck confirms `!HEALTHY!` | high | DTM-84 execution evidence complete for runtime/import stability |
| `agent/OPERATING_CONTRACT.md` + `AGENTS.md` + `agent/teamlead.md` | 2026-02-27 | TeamLead | runtime gate re-read this session (`CONTRACT CHECK: OK`) and Jira lifecycle enforced for DTM-84 | high | process source of truth |

## Archive
- Historical detailed evidence log preserved at `agile/archive/context_registry_2026-02-27.pre_hygiene.md`.
- Historical sprint-board log preserved at `agile/archive/sprint_current_2026-02-27.pre_hygiene.md`.
